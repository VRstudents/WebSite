<!DOCTYPE html>
<html>
  <head>
    <title>Create HTML5 Canvas JavaScript Game Character Example</title>
    <!--[if IE]><script type="text/javascript" src="excanvas.js"></script><![endif]-->
	<link rel="stylesheet" href="style.css">
  </head>
  <body>
	<div>
		<div id="gender">
			<label>Gender</label><br>
			<input type="radio" name="gender" value="male">Male<br>
			<input type="radio" name="gender" value="female">Female<br>
		</div>
		------------------------------------------------
		<div id="maleOpts" style="display:none;">
			<div id="skinColor">
				<label>Skin color</label><br>
				<label>
					<input type="radio" name="skinColor" value="1"/>
					<img src="images/head1.png">
				</label>
				<label>
					<input type="radio" name="skinColor" value="2"/>
					<img src="images/head2.png">
				</label>			
			</div><br>
			
			<div id="shirtColor">
				<label>Shirt</label><br>
				<label>
					<input type="radio" name="shirtColor" value="1"/>
					<img src="images/torso1.png">
				</label>
				<label>
					<input type="radio" name="shirtColor" value="2"/>
					<img src="images/torso2.png">
				</label>			
			</div><br>
			
			<div id="hairColor">
				<label>Hair color</label><br>
				<label>
					<input type="radio" name="hairColor" value="1"/>
					<img src="images/hair1.png">
				</label>
				<label>
					<input type="radio" name="hairColor" value="2"/>
					<img src="images/hair2.png">
				</label>			
			</div><br>
			
			<div id="pantsColor">
				<label>Pants color</label><br>
				<label>
					<input type="radio" name="pantsColor" value="1"/>
					<img src="images/legs1.png">
				</label>
				<label>
					<input type="radio" name="pantsColor" value="2"/>
					<img src="images/legs2.png">
				</label>			
			</div><br>
		</div>
		
		<div id="femaleOpts" style="display:none;">
			<div id="skinColor">
				<label>Skin color</label><br>
				<label>
					<input type="radio" name="skinColor" value="1"/>
					<img src="images/head3.png">
				</label>
				<label>
					<input type="radio" name="skinColor" value="2"/>
					<img src="images/head4.png">
				</label>			
			</div><br>
			
			<div id="shirtColor">
				<label>Shirt</label><br>
				<label>
					<input type="radio" name="shirtColor" value="1"/>
					<img src="images/torso3.png">
				</label>
				<label>
					<input type="radio" name="shirtColor" value="2"/>
					<img src="images/torso4.png">
				</label>			
			</div><br>
			
			<div id="hairColor">
				<label>Hair color</label><br>
				<label>
					<input type="radio" name="hairColor" value="1"/>
					<img src="images/hair3.png">
				</label>
				<label>
					<input type="radio" name="hairColor" value="2"/>
					<img src="images/hair4.png">
				</label>			
			</div><br>
			
			<div id="pantsColor">
				<label>Pants color</label><br>
				<label>
					<input type="radio" name="pantsColor" value="1"/>
					<img src="images/legs3.png">
				</label>
				<label>
					<input type="radio" name="pantsColor" value="2"/>
					<img src="images/legs4.png">
				</label>			
			</div><br>
		</div>
		
		<button onclick="createAvatar();">Set</button>
	</div>
  
    <div id="canvasDiv"></div>
	<button id="downloadBtn" onclick="download()">Download</button>
    
	<script type="text/javascript" src="reimg-master/reimg.js"></script>
	<script type="text/javascript" src="canvas.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">	
		function createAvatar(){
			gender = document.querySelector('input[name="gender"]:checked').value;
			var arr = [];
			arr.push(document.querySelector('input[name="skinColor"]:checked').value);
			arr.push(document.querySelector('input[name="shirtColor"]:checked').value);
			arr.push(document.querySelector('input[name="hairColor"]:checked').value);
			arr.push(document.querySelector('input[name="pantsColor"]:checked').value);
			
			prepareCanvas(document.getElementById("canvasDiv"), 190, 190, arr, gender);
		}
		
		function download(){
			var can = document.getElementById("canvas");
			<!-- var src = can.toDataURL("image/png"); -->
			ReImg.fromCanvas(can).downloadPng();
		}
		$("#gender input[type=radio]").on('change',function(){
			if(document.querySelector('input[name="gender"]:checked').value == 'male'){
				$('#femaleOpts').css('display','none');
				$('#maleOpts').css('display','inline');
			} else {
				$('#maleOpts').css('display','none');
				$('#femaleOpts').css('display','inline');
			};
		});
    </script>
  </body>
</html>